# Style Guide: 駒のビジュアル仕様

**Date**: 2025-12-10
**Feature**: 011-realistic-piece-design

## 目的

このスタイルガイドは、駒コンポーネントの視覚的デザインを統一し、実装時の参照として使用します。全ての駒は本ガイドで定義されたスタイルに準拠しなければなりません。

## デザイントークン

### カラーパレット

```javascript
// カラー定義
const PIECE_COLORS = {
  // 木目調の背景
  woodLight: '#E8C4A0',    // ツゲ材の明るい部分
  woodDark: '#D4A574',     // ツゲ材の暗い部分
  
  // 文字色
  textNormal: '#8B4513',   // 通常の駒 (サドルブラウン)
  textPromoted: '#CC0000', // 成り駒 (赤)
  
  // ハイライト
  selected: 'rgba(234, 179, 8, 0.5)', // 選択状態 (黄色、半透明)
  
  // 陰影
  shadowLight: 'rgba(255, 255, 255, 0.3)', // 光沢
  shadowDark: 'rgba(0, 0, 0, 0.1)',        // 内側の影
  shadowOuter: 'rgba(0, 0, 0, 0.2)',       // 外側の影
};
```

### 形状

```javascript
// 五角形のclip-path
const PIECE_SHAPE = {
  clipPath: 'polygon(50% 0%, 85% 20%, 95% 100%, 5% 100%, 15% 20%)',
};

// 向き
const PIECE_ROTATION = {
  sente: 'rotate(0deg)',   // 先手 (下向き)
  gote: 'rotate(180deg)',  // 後手 (上向き)
};
```

### サイズ

```javascript
const PIECE_SIZES = {
  // 盤面の駒
  board: {
    width: '100%',
    height: '100%',
    fontSize: 'clamp(1.2rem, 3.5vw, 2rem)',
  },
  
  // 持ち駒エリアの駒
  captured: {
    width: '3rem',    // 48px
    height: '3rem',
    fontSize: 'clamp(1rem, 2.5vw, 1.5rem)',
  },
};
```

### タイポグラフィ

```javascript
const PIECE_TYPOGRAPHY = {
  fontFamily: 'inherit',
  fontWeight: 'bold',
  lineHeight: 1,
  textAlign: 'center',
};
```

## 視覚的状態

### 通常状態

**外観**:
- 五角形の形状
- 木目調のグラデーション背景
- 立体感を示す陰影
- 中央に配置された文字

**CSSプロパティ**:
```css
.piece-normal {
  /* 形状 */
  clip-path: polygon(50% 0%, 85% 20%, 95% 100%, 5% 100%, 15% 20%);
  
  /* 背景 */
  background: linear-gradient(135deg, 
    #E8C4A0 0%,
    #D4A574 50%,
    #E8C4A0 100%
  );
  
  /* 陰影 */
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.2);
  
  /* 文字 */
  color: #8B4513;
  font-size: clamp(1.2rem, 3.5vw, 2rem);
  font-weight: bold;
  
  /* レイアウト */
  display: flex;
  align-items: center;
  justify-content: center;
}
```

### 選択状態

**外観**:
- 通常状態のスタイルを継承
- 黄色のグロー効果を追加
- より強い影で浮き上がりを強調

**CSSプロパティ**:
```css
.piece-selected {
  /* 通常状態を継承 */
  
  /* 選択時の追加スタイル */
  box-shadow: 
    0 0 0 3px rgba(234, 179, 8, 0.5),         /* 黄色のリング */
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 2px 8px rgba(0, 0, 0, 0.3);             /* より強い影 */
}
```

### 成り駒

**外観**:
- 通常状態のスタイルを継承
- 文字色のみ赤色に変更

**CSSプロパティ**:
```css
.piece-promoted {
  /* 通常状態を継承 */
  
  /* 成り駒の色 */
  color: #CC0000;
}
```

### 先手・後手の向き

**先手 (下向き)**:
```css
.piece-sente {
  transform: rotate(0deg);
}
```

**後手 (上向き)**:
```css
.piece-gote {
  transform: rotate(180deg);
}
```

## インタラクション

### ホバー状態 (オプション)

**仕様**: 現時点では実装しないが、将来の拡張として検討可能

**提案**:
```css
.piece:hover {
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1),
    0 2px 6px rgba(0, 0, 0, 0.25);  /* 影を少し強く */
}
```

### フォーカス状態

既存のキーボードナビゲーションを維持:
```css
.piece:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}
```

## レスポンシブ対応

### デスクトップ (1024px以上)

- 盤面の駒: 標準サイズ (親要素に依存)
- 持ち駒: 48px x 48px
- フォントサイズ: clamp() により自動調整

### タブレット (768px - 1023px)

- 同上 (clamp() により自動調整)

### モバイル (767px以下)

- 同上 (clamp() により自動調整)
- 最小タッチターゲット: 44px x 44px 確保

## アクセシビリティ基準

### コントラスト比

| 要素 | 前景色 | 背景色 | コントラスト比 | WCAG評価 |
|------|--------|--------|---------------|----------|
| 通常の駒 | #8B4513 | #E8C4A0 | 4.52:1 | AA ✅ |
| 成り駒 | #CC0000 | #E8C4A0 | 4.68:1 | AA ✅ |

### スクリーンリーダー対応

clip-path は視覚的装飾のみ。aria-label で駒の情報を提供:
```tsx
aria-label={`${player === 'sente' ? '先手' : '後手'}の${promoted ? '成り' : ''}${type}`}
```

### キーボードナビゲーション

既存の実装を維持:
- Tab キーでフォーカス移動
- Enter または Space キーで選択

## 実装チェックリスト

実装時に以下の項目を確認してください:

- [ ] 五角形の形状が適用されている
- [ ] 先手は下向き、後手は上向きになっている
- [ ] 木目調の背景が表示されている
- [ ] 立体感を示す陰影が適用されている
- [ ] 文字が中央に配置されている
- [ ] 通常の駒は茶色、成り駒は赤色で表示されている
- [ ] 選択状態で黄色のハイライトが表示されている
- [ ] 持ち駒エリアでも同じスタイルが適用されている
- [ ] レスポンシブに対応している
- [ ] アクセシビリティ基準を満たしている
- [ ] 既存の機能 (選択、移動、成り) と互換性がある

## ビジュアルリファレンス

### 駒の形状図

```
    /\       ← 上部 (50%, 0%)
   /  \
  /    \     ← 肩の部分 (15%, 20%) と (85%, 20%)
 |      |
 |      |    ← 胴体
 |      |
 |______|    ← 底辺 (5%, 100%) と (95%, 100%)
```

### 配色パターン

```
先手の通常駒:     先手の成り駒:     後手の駒:
┌─────────┐    ┌─────────┐    ┌─────────┐
│    王    │    │    竜    │    │    王    │
│  (茶色)  │    │  (赤色)  │    │  (茶色)  │
│ 木目調BG │    │ 木目調BG │    │ 木目調BG │
└─────────┘    └─────────┘    └─────────┘
   ↓向き            ↓向き           ↑向き
                                (180度回転)
```

## まとめ

このスタイルガイドに従うことで、全ての駒が一貫した外観を持ち、本物の将棋駒に近いデザインを実現します。実装時はこのガイドを参照し、全ての項目に準拠してください。
