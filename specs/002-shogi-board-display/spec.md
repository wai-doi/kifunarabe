# Feature Specification: 将棋盤と駒の初期配置表示

**Feature Branch**: `002-shogi-board-display`
**Created**: 2025-11-01
**Status**: Draft
**Input**: User description: "トップページに将棋盤と将棋盤の上に駒が初期配置で表示されること。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 将棋盤の表示 (Priority: P1)

ユーザーがトップページにアクセスしたとき、9×9のマス目で構成された将棋盤が表示される。

**Why this priority**: これは最も基本的な機能であり、駒を配置するための土台となる。将棋盤が表示されなければ、他のすべての機能が成り立たない。

**Independent Test**: トップページを開くだけで、将棋盤のマス目構造が表示されることを確認できる。

**Acceptance Scenarios**:

1. **Given** ユーザーがブラウザでアプリケーションにアクセスした、**When** トップページが読み込まれる、**Then** 9×9のマス目で構成された将棋盤が画面に表示される
2. **Given** 将棋盤が表示されている、**When** ユーザーが将棋盤を視認する、**Then** 各マス目の境界線が明確に識別できる
3. **Given** 将棋盤が表示されている、**When** ユーザーがマス目を数える、**Then** 横方向に9マス、縦方向に9マスの計81マスが存在する

---

### User Story 2 - 駒の初期配置表示 (Priority: P2)

将棋盤が表示された状態で、対局開始時の標準的な駒の配置が各マス目に表示される。

**Why this priority**: 将棋盤の基本構造の次に重要な機能。駒が正しく配置されていないと、将棋の対局を視覚的に理解することができない。

**Independent Test**: 将棋盤が表示されているページで、すべての駒(40枚)が正しい位置に配置されていることを確認できる。

**Acceptance Scenarios**:

1. **Given** トップページに将棋盤が表示されている、**When** ページの読み込みが完了する、**Then** 先手側(下側)の駒20枚が正しい位置に配置される
2. **Given** トップページに将棋盤が表示されている、**When** ページの読み込みが完了する、**Then** 後手側(上側)の駒20枚が正しい位置に配置される
3. **Given** 駒が配置されている、**When** ユーザーが駒を視認する、**Then** 各駒の種類(王・飛車・角・金・銀・桂馬・香車・歩)が識別できる
4. **Given** 駒が配置されている、**When** ユーザーが駒の向きを確認する、**Then** 先手の駒は上向き、後手の駒は下向きに表示される

---

### User Story 3 - レスポンシブ表示 (Priority: P3)

異なる画面サイズやデバイスでアクセスした場合でも、将棋盤と駒が適切なサイズで表示される。

**Why this priority**: ユーザーエクスペリエンスの向上に貢献するが、基本的な機能が動作していればMVPとして成立する。

**Independent Test**: 異なる画面サイズ(デスクトップ、タブレット、スマートフォン)でページを開き、将棋盤と駒が適切に表示されることを確認できる。

**Acceptance Scenarios**:

1. **Given** ユーザーがスマートフォンでアクセスした、**When** トップページが読み込まれる、**Then** 将棋盤と駒が画面サイズに合わせて縮小表示される
2. **Given** ユーザーがデスクトップブラウザでアクセスした、**When** トップページが読み込まれる、**Then** 将棋盤と駒が適切な大きさで中央に表示される
3. **Given** ブラウザウィンドウのサイズが変更された、**When** ウィンドウを縮小または拡大する、**Then** 将棋盤と駒のサイズが自動的に調整される

---

### Edge Cases

- ブラウザのウィンドウが300x300ピクセル未満の場合、将棋盤は300x300ピクセルの最小サイズで表示され、スクロールバーが表示される
- 駒はテキストで表示されるため、画像読み込み失敗の問題は発生しない
- 非常に古いブラウザ(IE11など)でアクセスした場合、グレースフルデグラデーションにより基本的な将棋盤と駒は表示されるが、一部の視覚効果やレイアウトは簡素化される

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは、トップページに9×9のマス目で構成された将棋盤を薄茶色(#D4A574)で表示しなければならない
- **FR-002**: システムは、将棋盤の各マス目の境界線を明確に表示しなければならない
- **FR-010**: システムは、ページ背景を畳をイメージした黄緑がかった茶色(#C8B560)で表示しなければならない
- **FR-003**: システムは、将棋の標準的な初期配置に従って40枚の駒を配置しなければならない
- **FR-004**: システムは、先手側(下側)に王将、飛車、角行、金将2枚、銀将2枚、桂馬2枚、香車2枚、歩兵9枚を配置しなければならない
- **FR-005**: システムは、後手側(上側)に玉将、飛車、角行、金将2枚、銀将2枚、桂馬2枚、香車2枚、歩兵9枚を配置しなければならない
- **FR-006**: システムは、各駒の種類を日本語テキスト文字(王、玉、飛、角、金、銀、桂、香、歩)で表示し、フォントサイズはマス目の高さの70%とする
- **FR-007**: システムは、先手の駒を上向きに、後手の駒を下向きに表示しなければならない
- **FR-008**: システムは、異なる画面サイズに対応し、将棋盤と駒を適切にスケーリングしなければならない(最小300x300ピクセル)
- **FR-009**: システムは、ページ読み込み時に将棋盤と駒を自動的に表示しなければならない

### Key Entities

- **将棋盤(Board)**: 9×9のマス目を持つグリッド構造。各マス目は座標(1-9の筋、1-9の段)で識別される
- **駒(Piece)**: 将棋の駒を表現する要素。種類(王将・玉将・飛車・角行・金将・銀将・桂馬・香車・歩兵)、所属(先手・後手)、位置(筋と段)、向きの情報を持つ
- **マス目(Square)**: 将棋盤上の個別の位置。座標情報と現在配置されている駒の情報を持つ

## Clarifications

### Session 2025-11-01

- Q: 駒の表示方法 → A: 日本語テキスト文字(王、飛、角など)を使用
- Q: 配色の具体的な定義 → A: 盤=#D4A574(薄茶)、駒=#8B4513(濃茶)、背景=#C8B560(畳の黄緑がかった茶色)
- Q: 将棋盤の最小表示サイズ → A: 300x300ピクセル
- Q: 古いブラウザでの対応 → A: グレースフルデグラデーション - 基本機能は動作するが見た目は簡素化
- Q: 駒のフォントサイズとスケーリング → A: マス目の70%

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーがトップページにアクセスしてから1秒以内に将棋盤が表示される
- **SC-002**: ユーザーがトップページにアクセスしてから2秒以内にすべての駒が表示される
- **SC-003**: 95%以上のユーザーが、ページを開いた際に将棋盤と駒が正しく表示されることを確認できる
- **SC-004**: モバイルデバイス(画面幅480px以上)からアクセスした場合でも、将棋盤の全体が視認可能である
- **SC-005**: デスクトップブラウザ(画面幅1024px以上)からアクセスした場合、将棋盤が画面中央に適切なサイズで表示される

## Assumptions

- 将棋の初期配置は、日本将棋連盟が定める標準的なルールに従う
- ブラウザは、モダンブラウザ(Chrome、Firefox、Safari、Edgeの最新版または1つ前のバージョン)を想定するが、古いブラウザでもグレースフルデグラデーションで基本機能は動作する
- 駒は日本語テキスト文字で表示され、画像やアイコンは使用しない
- 配色: 将棋盤=#D4A574(薄茶/木製)、駒テキスト=#8B4513(濃茶)、ページ背景=#C8B560(畳の黄緑がかった茶色)
- ユーザーは日本語を理解し、将棋のルールについて基本的な知識を持っている

## Dependencies

- なし(この機能は他の機能に依存しない独立した機能)

## Out of Scope

- 駒の移動機能
- 対局の記録や再生機能
- ユーザー認証やアカウント管理
- 棋譜の保存や読み込み
- AI対戦機能
- マルチプレイヤー機能
- 駒台(持ち駒)の表示
- 成り駒の表示
